<!DOCTYPE html>
<html>
<head><title>Coord Test</title></head>
<body>
<div style="width: 400px; height: 400px; border: 2px solid blue; position: relative; margin: 50px;">
    <div style="width: 200px; height: 200px; border: 1px solid red; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        <canvas id="test" width="200" height="200" style="display: block;"></canvas>
    </div>
</div>
<script>
const canvas = document.getElementById('test');
const ctx = canvas.getContext('2d');
ctx.fillStyle = 'green';
ctx.fillRect(0, 0, 50, 50);

canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    console.log('Click:', e.clientX, e.clientY);
    console.log('Rect:', rect);
    console.log('Relative:', e.clientX - rect.left, e.clientY - rect.top);
});
</script>
</body>
</html>
